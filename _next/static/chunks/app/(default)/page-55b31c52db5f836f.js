(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[772],{49268:function(e,s,a){Promise.resolve().then(a.bind(a,29877))},29877:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return w},metadata:function(){return N}});var t=a(9268),l=a(86006),n=a(55449),r=a(79889),i=a(70238),d=a(53430),o=a(82108),c=a(37437),x=a(87490);let u=["请批准 TCP","锁仓 TCP"];function m(e){var s;let{close:a}=e,[m,h]=(0,x.Xs)("parent-address",""),[f,b]=(0,l.useState)(0),[v,p]=(0,l.useState)(0),[N,j]=(0,l.useState)(0),[w,g]=(0,l.useState)(1),[k,y]=(0,l.useState)(!1),[S,C]=(0,l.useState)(!1),[P,F]=(0,l.useState)(!1),{address:L,isConnecting:A,isDisconnected:Z}=(0,n.mA)(),E=(0,n.xx)();(0,n.do)({address:d.lS.address[E],abi:d.lS.abi,functionName:"allowance",args:[L,d.wA.address[E]],chainId:E,watch:!0,onSuccess(e){e&&j(Number((0,r.dF)(null==e?void 0:e.toString()))),console.log("allowanceResult",e),0==f&&e&&Number((0,r.dF)(null==e?void 0:e.toString()))>=1e8&&b(1)}});let{data:T,isSuccess:_,write:B}=(0,n.GG)({address:d.lS.address[E],abi:d.lS.abi,functionName:"approve",onError(e){c.ZP.error(e.details)}});(0,n.BX)({hash:null==T?void 0:T.hash,onSuccess(e){e.blockNumber&&y(!1)}}),(0,l.useEffect)(()=>{console.log("step",f)},[f]),(0,l.useEffect)(()=>{console.log("lockNum",w),console.log("allowance",N),w<N&&F(!1),Number(w)>Number(N)&&1==f&&(F(!0),c.ZP.custom(e=>(0,t.jsxs)("div",{className:"".concat(e.visible?"animate-enter":"animate-leave"," max-w-md w-full bg-white shadow-lg rounded-lg pointer-events-auto flex ring-1 ring-black ring-opacity-5"),children:[(0,t.jsx)("div",{className:"flex-1 w-0 p-2",children:(0,t.jsxs)("div",{className:"flex items-start",children:[(0,t.jsx)("div",{className:"flex-shrink-0 pt-0.5",children:(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6 text-red-500",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m9-.75a9 9 0 11-18 0 9 9 0 0118 0zm-9 3.75h.008v.008H12v-.008z"})})}),(0,t.jsx)("div",{className:"ml-3 flex-1",children:(0,t.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"你输入的金额超过授权额度.需要前往增加授权额度嘛?"})})]})}),(0,t.jsx)("div",{className:"flex border-l border-gray-200",children:(0,t.jsx)("button",{onClick:s=>{s.preventDefault(),b(0),c.ZP.dismiss(e.id),console.log("close")},className:"w-full border border-transparent rounded-none rounded-r-lg p-4 flex items-center justify-center text-sm font-medium text-red-500 hover:text-indigo-500 focus:outline-none focus:ring-2 focus:ring-indigo-500",children:"去授权"})})]}),{position:"bottom-center",duration:5e3}))},[w,N]),(0,n.KQ)({address:L,token:d.lS.address[E],watch:!0,onSuccess(e){p(Number(e.formatted).toFixed(3))}});let G=(0,n.GG)({address:d.wA.address[E],abi:d.wA.abi,functionName:"lock",onError(e){c.ZP.error(e.details),C(!1),F(!1)}});(0,n.BX)({hash:null===(s=G.data)||void 0===s?void 0:s.hash,onSuccess(e){e.blockNumber&&(c.ZP.success("锁仓成功"),setTimeout(()=>{C(!1),F(!1),a()},3e3))}});let M=()=>{if(w<1){c.ZP.error("锁仓数量太低");return}if(!m){c.ZP.error("请使用邀请链接打开");return}C(!0),G.write({args:[L,(0,r.fi)(w.toString()),m],value:(0,r.fi)("0.003")})};return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)("div",{className:"",children:(0,t.jsx)("div",{className:"  flex flex-col justify-center",children:(0,t.jsx)("div",{className:"px-5 sm:px-6 py-8",children:(0,t.jsxs)("div",{className:"max-w-md mx-auto",children:[(0,t.jsxs)("div",{className:"mb-6 flex justify-between",children:[(0,t.jsx)("h1",{className:"h4 font-playfair-display text-slate-800",children:u[f]}),(0,t.jsx)("button",{onClick:a,children:(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"w-10 h-10",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.75 9.75l4.5 4.5m0-4.5l-4.5 4.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})})]}),(0,t.jsxs)("div",{className:"text-sm space-y-3",children:[(0,t.jsxs)("div",{className:"".concat(0!=f?"text-slate-400":""," flex"),children:[(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"".concat(f<=0?"hidden":""," w-6 h-6 text-green-600"),children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"1、需要通过链上 ERC20 批准交易一次性批准 TCP"]}),(0,t.jsxs)("div",{className:"".concat(1!=f?"text-slate-400":""," flex"),children:[(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"".concat(f<=1?"hidden":""," w-6 h-6 text-green-600"),children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"2、确认将 TCP 锁仓"]}),(0,t.jsxs)("div",{className:"".concat(1!=f?"hidden":""),children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsxs)("label",{className:" text-sm font-medium mb-1",htmlFor:"lockNum",children:["您锁仓 ",(0,t.jsx)("span",{className:"text-rose-500",children:"*"})]}),(0,t.jsxs)("label",{className:" text-sm font-medium mb-1",htmlFor:"lockNum",children:["余额:",v," ",(0,t.jsx)("span",{className:"text-blue-700",onClick:e=>{e.preventDefault(),g(v)},children:"最大"})]})]}),(0,t.jsx)("input",{id:"lockNum",className:"form-input py-2 w-full",type:"number",value:w,onChange:e=>{e.preventDefault(),e.stopPropagation(),g(Number(e.target.value))},required:!0})]})]}),(0,t.jsxs)("div",{className:"mt-4",children:[(0,t.jsx)("div",{className:"".concat(0!=f?"hidden":""),children:(0,t.jsx)(o.Z,{isLoading:k,disabled:k,onClick:()=>{y(!0),B({args:[d.wA.address[E],i.Bz]})},children:"允许锁仓 TCP"})}),(0,t.jsx)("div",{className:"".concat(1!=f?"hidden":""),children:(0,t.jsx)(o.Z,{isLoading:S,disabled:P||S,onClick:M,children:"锁仓 TCP"})})]})]})})})})})}var h=a(81292);function f(){var e,s,a;let[i,x]=(0,l.useState)(!1),u=(0,n.xx)(),{address:f,isConnecting:b,isDisconnected:v}=(0,n.mA)(),[p,N]=(0,l.useState)(0),[j,w]=(0,l.useState)(0),[g,k]=(0,l.useState)(0),[y,S]=(0,l.useState)(0),[C,P]=(0,l.useState)(0),[F,L]=(0,l.useState)(!1),[A,Z]=(0,l.useState)(!1),[E,T]=(0,l.useState)(!1);(0,n.Dm)({contracts:[{address:d.wA.address[u],abi:d.wA.abi,functionName:"getUnlockAmount",args:[f||"0x0000000000000000000000000000000000000000"]},{address:d.wA.address[u],abi:d.wA.abi,functionName:"getWaitHarvest",args:[f||"0x0000000000000000000000000000000000000000"]},{address:d.wA.address[u],abi:d.wA.abi,functionName:"getUserInfo",args:[f||"0x0000000000000000000000000000000000000000"]},{address:d.lS.address[u],abi:d.lS.abi,functionName:"balanceOf",args:[f||"0x0000000000000000000000000000000000000000"]}],watch:!0,onSuccess:e=>{console.log("chainId",u),console.log("useContractReads3",e),N(Number((0,r.dF)(e[2].result[2])).toFixed(1)),k(Number((0,r.dF)(e[0].result)).toFixed(1)),S(Number((0,r.dF)(e[1].result)).toFixed(1)),P(Number((0,r.dF)(e[2].result[3])).toFixed(1)),w(Number((0,r.dF)(e[3].result)).toFixed(1))}});let _=(0,n.GG)({address:d.wA.address[u],abi:d.wA.abi,functionName:"harvest",onError(e){L(!1),c.ZP.error(e.details)}}),B=(0,n.GG)({address:d.wA.address[u],abi:d.wA.abi,functionName:"relock",onError(e){T(!1),c.ZP.error(e.details)}}),G=(0,n.GG)({address:d.wA.address[u],abi:d.wA.abi,functionName:"harvestUnlockAmount",onError(e){Z(!1),c.ZP.error(e.details)}});return(0,n.BX)({hash:null===(e=_.data)||void 0===e?void 0:e.hash,onSuccess(e){e.blockNumber&&(c.ZP.success("领取成功"),L(!1))}}),(0,n.BX)({hash:null===(s=G.data)||void 0===s?void 0:s.hash,onSuccess(e){e.blockNumber&&(c.ZP.success("领取成功"),Z(!1))}}),(0,n.BX)({hash:null===(a=B.data)||void 0===a?void 0:a.hash,onSuccess(e){e.blockNumber&&(c.ZP.success("复投成功"),T(!1))}}),(0,t.jsx)("div",{children:(0,t.jsxs)("div",{className:"max-w-sm mx-auto grid gap-8 lg:grid-cols-2 items-start lg:max-w-none pt-4",children:[(0,t.jsxs)("div",{className:"relative flex flex-col h-full px-6 py-5 bg-white shadow-lg","data-aos":"fade-up","data-aos-delay":"100",children:[(0,t.jsxs)("div",{className:"h4 pb-4",children:[(0,t.jsx)("span",{className:"border-l-4 border-blue-800  pl-2",children:"持仓"}),"信息"]}),(0,t.jsxs)("div",{className:"mb-4 pb-4 flex flex-row space-x-3",children:[(0,t.jsxs)("div",{className:"w-1/2 border-r-3 border-slate-200 text-left",children:[(0,t.jsx)("div",{className:"text-lg font-semibold text-slate-800 mb-1 w-full",children:"持仓金额"}),(0,t.jsxs)("div",{className:" items-baseline mb-3  w-full  space-x-1",children:[(0,t.jsx)("span",{className:"h2 leading-7 font-playfair-display text-slate-800",children:p}),(0,t.jsx)("span",{className:" text-slate-400 font-bold",children:"TCP"})]}),(0,t.jsxs)("div",{className:"rounded  w-full",children:[(0,t.jsx)("button",{className:"btn-sm text-white bg-blue-600 hover:bg-blue-700 group",onClick:e=>{e.preventDefault(),e.stopPropagation(),x(!0)},children:"添加持仓"}),(0,t.jsx)(h.Z,{id:"PositionAdd",ariaLabel:"1232",show:i,handleClose:()=>{x(!1)},children:(0,t.jsx)(m,{close:()=>{x(!1)}})})]})]}),(0,t.jsxs)("div",{className:"w-1/2 text-right",children:[(0,t.jsx)("div",{className:"text-lg font-semibold text-slate-800 mb-1 w-full",children:"已释放"}),(0,t.jsxs)("div",{className:" items-baseline   w-full  space-x-1",children:[(0,t.jsx)("span",{className:"h2 leading-7 font-playfair-display text-slate-800",children:g}),(0,t.jsx)("span",{className:" text-slate-400  font-bold",children:"TCP"})]}),(0,t.jsx)("div",{className:"rounded  w-full flex",children:(0,t.jsx)(o.Z,{isLoading:A,disabled:A,onClick:()=>{Z(!0),G.write({value:(0,r.fi)("0.003")})},children:"领取"})})]})]}),(0,t.jsx)("div",{className:"mb-4 pb-4 flex flex-row space-x-3",children:(0,t.jsxs)("div",{className:"w-1/2 border-r-3 border-slate-200 text-left",children:[(0,t.jsx)("div",{className:"text-lg font-semibold text-slate-800 mb-1 w-full",children:"TCP余额"}),(0,t.jsxs)("div",{className:" items-baseline mb-3  w-full  space-x-1",children:[(0,t.jsx)("span",{className:"h2 leading-7 font-playfair-display text-slate-800",children:j}),(0,t.jsx)("span",{className:" text-slate-400 font-bold",children:"TCP"})]})]})})]}),(0,t.jsxs)("div",{className:"relative flex flex-col h-full px-6 py-5 bg-white shadow-lg","data-aos":"fade-up","data-aos-delay":"100",children:[(0,t.jsxs)("div",{className:"h4 pb-4",children:[(0,t.jsx)("span",{className:"border-l-4 border-blue-800  pl-2",children:"复息"}),"信息"]}),(0,t.jsxs)("div",{className:"mb-4 pb-4 flex flex-row space-x-3",children:[(0,t.jsxs)("div",{className:"w-1/2 border-r-3 border-slate-200 text-left",children:[(0,t.jsx)("div",{className:"text-lg font-semibold text-slate-800 mb-1 w-full",children:"待领取"}),(0,t.jsxs)("div",{className:" items-baseline mb-3  w-full  space-x-1",children:[(0,t.jsx)("span",{className:"h2 leading-7 font-playfair-display text-slate-800",children:y}),(0,t.jsx)("span",{className:" text-slate-400  font-bold",children:"TCP"})]}),(0,t.jsxs)("div",{className:"rounded  w-full space-x-1 flex",children:[(0,t.jsx)(o.Z,{isLoading:F,disabled:F,onClick:()=>{L(!0),_.write({value:(0,r.fi)("0.003")})},children:"领取"}),(0,t.jsx)(o.Z,{isLoading:E,disabled:E,onClick:()=>{T(!0),B.write({value:(0,r.fi)("0.003")})},children:"复投"})]})]}),(0,t.jsxs)("div",{className:"w-1/2  border-slate-200 text-right",children:[(0,t.jsx)("div",{className:"text-lg font-semibold text-slate-800 mb-1 w-full",children:"已领取"}),(0,t.jsxs)("div",{className:" items-baseline mb-3  w-full space-x-1",children:[(0,t.jsx)("span",{className:"h2 leading-7 font-playfair-display text-slate-800",children:C}),(0,t.jsx)("span",{className:"font-bold text-slate-400",children:"TCP"})]})]})]})]})]})})}function b(){return(0,t.jsxs)("section",{className:"relative",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-slate-900 pointer-events-none -z-10 h-1/3 lg:h-[48rem] [clip-path:polygon(0_0,_5760px_0,_5760px_calc(100%_-_352px),_0_100%)] bg-[url('/images/banner.webp')] bg-cover bg-left","aria-hidden":"true"}),(0,t.jsx)("div",{className:"relative max-w-6xl mx-auto px-4 sm:px-6 ",children:(0,t.jsxs)("div",{className:"pt-28 ",children:[(0,t.jsxs)("div",{className:"mx-auto pb-3 space-y-3",children:[(0,t.jsxs)("div",{className:"h1 text-slate-100",children:[(0,t.jsx)("span",{className:"",children:"更加"}),(0,t.jsx)("span",{className:"text-blue-600",children:"安全"})]}),(0,t.jsxs)("div",{className:"text-2xl font-bold text-slate-100",children:[(0,t.jsx)("span",{className:"",children:"您最宝贵的资产现在"}),(0,t.jsx)("span",{className:"animate-pulse bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-blue-800",children:"焕然一新"})]})]}),(0,t.jsx)(f,{})]})})]})}var v=a(79234),p=a.n(v);let N={title:"主页",description:"Page description"};function j(){return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(b,{})})}var w=p()(()=>Promise.resolve(j),{ssr:!1})},82108:function(e,s,a){"use strict";a.d(s,{Z:function(){return l}});var t=a(9268);function l(e){let{children:s,isLoading:a=!1,disabled:l=!1,className:n="w-full btn-sm  mt-4",onClick:r}=e;return(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)("button",{disabled:l,className:"".concat(l?"text-white bg-slate-600 hover:bg-slate-700":"text-white bg-blue-600 hover:bg-blue-700"," ").concat(n),onClick:e=>{e.preventDefault(),e.stopPropagation(),r()},children:[(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"".concat(a?"flex":"hidden"," w-6 h-6 animate-spin"),children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99"})}),s]})})}},81292:function(e,s,a){"use strict";a.d(s,{Z:function(){return r}});var t=a(9268),l=a(86006),n=a(9666);function r(e){let{children:s,id:a,ariaLabel:r,show:i,handleClose:d}=e,o=(0,l.useRef)(null);return(0,l.useEffect)(()=>{let e=e=>{var s;let{target:a}=e;!i||(null===(s=o.current)||void 0===s?void 0:s.contains(a))||d()};return document.addEventListener("click",e),()=>document.removeEventListener("click",e)},[i,d,o]),(0,l.useEffect)(()=>{let e=e=>{let{keyCode:s}=e;27===s&&d()};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[d]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.u,{show:i,enter:"transition ease-out duration-200",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"transition ease-out duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",className:"fixed inset-0 z-50 bg-black bg-opacity-75 transition-opacity","aria-hidden":"true"}),(0,t.jsx)(n.u,{show:i,enter:"transition ease-out duration-200",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ttransition ease-out duration-200",leaveFrom:"oopacity-100 scale-100",leaveTo:"opacity-0 scale-95",id:a,className:"fixed inset-0 z-50 overflow-hidden flex items-center justify-center transform px-4 sm:px-6",role:"dialog","aria-modal":"true","aria-labelledby":r,children:(0,t.jsx)("div",{className:"bg-white overflow-auto  max-h-full",ref:o,children:s})})]})}}},function(e){e.O(0,[882,889,388,925,430,667,139,744],function(){return e(e.s=49268)}),_N_E=e.O()}]);